"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:()=>h});const a=require("../../api/settings"),b=require("../components/Icons"),c=require("../../components/discord"),d=require("../../modules/webpack/common"),e=function _interopRequireWildcard(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=_getRequireWildcardCache(b);if(c&&c.has(a))return c.get(a);var d={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&Object.prototype.hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}(require("../../api/toasts")),f=_interopRequireDefault(require("./Manager")),g=_interopRequireDefault(require("react"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}class Themes extends f.default{constructor(a){super(a,"themes"),this.state={search:"",breadcrumbs:[],settings:{entity:null,client:null}}}componentWillMount(){let a=this.forceUpdate.bind(this,null);window.powercord&&powercord.styleManager.on("updated",a),window.BdApi&&BdApi.Themes.on("updated",a),window.unbound&&unbound.managers.themes.on("updated",a)}componentWillUnmount(){let a=this.forceUpdate.bind(this,null);window.powercord&&powercord.styleManager.off("updated",a),window.BdApi&&BdApi.Themes.off("updated",a),window.unbound&&unbound.managers.themes.off("updated",a)}getAddons(){let a={unbound:[...unbound.managers.themes.entities.values()],powercord:[],bd:[]};return window.powercord&&a.powercord.push(...powercord.styleManager.addons),window.BdApi&&a.bd.push(...BdApi.Themes.getAll()),{addons:a,count:Object.values(a).flat().length}}onReload(){let a={unbound:[],powercord:[]};if(window.unbound){let f=unbound.managers.themes.loadMissing();a.unbound.push(...f.loaded)}if(window.powercord){let h=powercord.styleManager.loadAll(!0,!1);a.powercord.push(...h)}let i=Object.entries(a).flatMap(([a,d])=>{if(!d.length)return;let e=[];for(let f of d){let h=this.resolve(f,a,"name");e.push(g.default.createElement(c.Flex,{direction:c.Flex.Direction.HORIZONTAL,align:c.Flex.Align.CENTER,wrap:c.Flex.Wrap.NO_WRAP},"powercord"===a?g.default.createElement(b.Plug,{width:12,height:12}):null," ",h))}return e}).filter(Boolean);if(!i.length)return e.open({title:d.Locale.Messages.UNREADS_EMPTY_STATE_HEADER,content:d.Locale.Messages.UNBOUND_ADDONS_MISSING_NONE,color:"var(--info-positive-foreground)",timeout:2500,icon:"CheckmarkCircle"});e.open({title:d.Locale.Messages.UNBOUND_ADDONS_FOUND.format({type:"themes"}),icon:"CheckmarkCircle",timeout:5e3,color:"var(--info-positive-foreground)",content:()=>i})}}const h=(0,a.connectComponent)(Themes,"themes-manager")