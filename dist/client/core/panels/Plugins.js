"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:()=>i});const a=require("../../api/settings"),b=require("../components/Icons"),c=require("../../components/discord"),d=require("../../modules/webpack/common"),e=function _interopRequireWildcard(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=_getRequireWildcardCache(b);if(c&&c.has(a))return c.get(a);var d={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&Object.prototype.hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}(require("../../api/toasts")),f=require("../../../common/utilities/index"),g=_interopRequireDefault(require("./Manager")),h=_interopRequireDefault(require("react"));function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}function _getRequireWildcardCache(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(_getRequireWildcardCache=function(a){return a?c:b})(a)}class Plugins extends g.default{constructor(a){super(a,"plugins"),this.state={search:"",breadcrumbs:[],settings:{entity:null,client:null}}}componentWillMount(){let a=this.forceUpdate.bind(this,null);window.powercord&&powercord.pluginManager.on("updated",a),window.BdApi&&BdApi.Plugins.on("updated",a),window.unbound&&unbound.managers.plugins.on("updated",a)}componentWillUnmount(){let a=this.forceUpdate.bind(this,null);window.powercord&&powercord.pluginManager.off("updated",a),window.BdApi&&BdApi.Plugins.off("updated",a),window.unbound&&unbound.managers.plugins.off("updated",a)}getAddons(){let a={unbound:[...unbound.managers.plugins.entities.values()],powercord:[],bd:[]};return window.powercord&&a.powercord.push(...powercord.pluginManager.addons),window.BdApi&&a.bd.push(...BdApi.Plugins.getAll()),{addons:a,count:Object.values(a).flat().length}}onReload(){let a={unbound:[],powercord:[]};if(window.unbound){let f=unbound.managers.plugins.loadMissing();a.unbound.push(...f.loaded)}if(window.powercord){let g=powercord.pluginManager.loadAll(!0,!1);a.powercord.push(...g)}let i=Object.entries(a).flatMap(([a,d])=>{if(!d.length)return;let e=[];for(let f of d){let g=this.resolve(f,a,"name");e.push(h.default.createElement(c.Flex,{direction:c.Flex.Direction.HORIZONTAL,align:c.Flex.Align.CENTER,wrap:c.Flex.Wrap.NO_WRAP},"powercord"===a?h.default.createElement(b.Plug,{width:12,height:12}):null," ",g))}return e}).filter(Boolean);if(!i.length)return e.open({title:d.Locale.Messages.UNREADS_EMPTY_STATE_HEADER,content:d.Locale.Messages.UNBOUND_ADDONS_MISSING_NONE,color:"var(--info-positive-foreground)",timeout:2500,icon:"CheckmarkCircle"});e.open({title:d.Locale.Messages.UNBOUND_ADDONS_FOUND.format({type:"plugins"}),icon:"CheckmarkCircle",color:"var(--info-positive-foreground)",timeout:5e3,content:()=>i})}}!function(a,b,c,d){var e,f=arguments.length,g=f<3?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);else for(var h=a.length-1;h>=0;h--)(e=a[h])&&(g=(f<3?e(g):f>3?e(b,c,g):e(b,c))||g);return f>3&&g&&Object.defineProperty(b,c,g),g}([f.bind],Plugins.prototype,"onReload",null);const i=(0,a.connectComponent)(Plugins,"plugins-manager")