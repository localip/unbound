"use strict";var a;Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"default",{enumerable:!0,get:()=>i});const b=require("../../components/discord"),c=require("../../components/index"),d=require("../../api/settings"),e=require("../../modules/webpack/common"),f=_interopRequireDefault(require("../../modules/react")),g=_interopRequireDefault(require("../../styles/panels/updater.css")),h=require("../../../common/utilities/index");function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}g.default.append(),function(a){a.CHECKING="checking",a.UPDATING="updating",a.IDLE="idle"}(a||(a={}));class Updater extends f.default.Component{render(){let{settings:d}=this.props,g=d.get("status",a.IDLE),i=d.get("disabled",!1),j=d.get("updates",[]),k=d.get("force",!1),l={icon:"CloudDone",color:"var(--info-positive-foreground)",text:e.Locale.Messages.UNBOUND_UPDATER_DEFAULT_TEXT,description:e.Locale.Messages.UNBOUND_UPDATER_DEFAULT_DESCRIPTION};return i?(l.text=e.Locale.Messages.UNBOUND_UPDATER_DISABLED_TEXT,l.description=e.Locale.Messages.UNBOUND_UPDATER_DISABLED_DESCRIPTION,l.color="var(--info-warning-foreground)",l.icon="PrivacyAndSafety"):k?(l.text=e.Locale.Messages.UNBOUND_UPDATER_FAILED_TEXT,l.description=e.Locale.Messages.UNBOUND_UPDATER_FAILED_DESCRIPTION,l.color="var(--info-danger-foreground)",l.icon="CloseCircle"):g===a.CHECKING?(l.text=e.Locale.Messages.UNBOUND_UPDATER_FETCHING_TEXT,l.description=e.Locale.Messages.UNBOUND_UPDATER_FETCHING_DESCRIPTION,l.color="var(--header-primary)"):g===a.UPDATING?(l.text=e.Locale.Messages.UNBOUND_UPDATER_UPDATING_TEXT,l.description=e.Locale.Messages.UNBOUND_UPDATER_UPDATING_DESCRIPTION,l.icon="UpdateAvailable",l.color="var(--header-primary)"):j.length&&(l.text=e.Locale.Messages.UNBOUND_UPDATER_NEW_UPDATES_TEXT,l.description=e.Locale.Messages.UNBOUND_UPDATER_NEW_UPDATES_DESCRIPTION,l.icon="CloudDownload",l.color="var(--header-primary)"),f.default.createElement(c.ErrorBoundary,null,f.default.createElement(b.Typography,{variant:"text-sm/normal",className:(0,h.classnames)(b.Typography.Classes.defaultColor,b.Typography.Classes.defaultMarginh3,b.Typography.Classes.h1)},e.Locale.Messages.UNBOUND_UPDATER),f.default.createElement("div",{className:"unbound-updater"},f.default.createElement("div",{className:"unbound-updater-icon-container"},g===a.CHECKING?f.default.createElement(b.Spinner,{className:"unbound-updater-checking",type:b.Spinner.Type.SPINNING_CIRCLE}):f.default.createElement(c.Icon,{style:{color:l.color},className:"unbound-updater-icon",name:l.icon})),f.default.createElement("div",{className:"unbound-updater-status-container"},f.default.createElement(b.Typography,{className:"unbound-updater-status",tag:"h3"},l.text),f.default.createElement(b.Text,{tag:"h3"},l.description))),f.default.createElement("div",{className:"unbound-updater-actions"},!1,f.default.createElement(b.Button,{disabled:!1,size:b.Button.Sizes.SMALL,onClick(){d.set("status",a.CHECKING),setTimeout(()=>d.set("status",a.IDLE),2e3)}},e.Locale.Messages.UNBOUND_UPDATER_CHECK_FOR_UPDATES),f.default.createElement(b.Button,{disabled:g===a.CHECKING,className:"unbound-updater-actions-disable",color:i?b.Button.Colors.GREEN:b.Button.Colors.RED,size:b.Button.Sizes.SMALL,onClick:()=>d.toggle("disabled",!1)},i?e.Locale.Messages.UNBOUND_UPDATER_ENABLE_UPDATES:e.Locale.Messages.UNBOUND_UPDATER_DISABLE_UPDATES)),f.default.createElement(c.Divider,null),f.default.createElement("div",{className:"unbound-updater-updates-container"},0===j.length?f.default.createElement("div",{className:"unbound-updater-no-updates"},f.default.createElement("img",{className:"unbound-updater-placeholder-image","data-is-checking":g===a.CHECKING,src:i?"/assets/b5eb2f7d6b3f8cc9b60be4a5dcf28015.svg":g!==a.CHECKING?"/assets/13cb217fd14b022bf4b00dcc8c157238.svg":"/assets/8f79e7f01dbb1afeb122cb3e8c4a342f.svg"}),f.default.createElement(b.Text,{className:"unbound-updater-no-updates-title",color:b.Text.Colors.HEADER_PRIMARY,size:b.Text.Sizes.SIZE_20},i?e.Locale.Messages.UNBOUND_UPDATER_UPDATES_DISABLED:g!==a.CHECKING?e.Locale.Messages.UNBOUND_UPDATER_UPDATES_IDLE_TITLE:e.Locale.Messages.UNBOUND_UPDATER_UPDATES_SEARCHING_TITLE),f.default.createElement(b.Text,{className:"unbound-updater-no-updates-desc",color:b.Text.Colors.HEADER_SECONDARY,size:b.Text.Sizes.SIZE_16},i?e.Locale.Messages.UNBOUND_UPDATER_UPDATES_DISABLED_DESC:g!==a.CHECKING?e.Locale.Messages.UNBOUND_UPDATER_UPDATES_IDLE_TEXT:e.Locale.Messages.UNBOUND_UPDATER_UPDATES_SEARCHING_TEXT)):[]))}}const i=(0,d.connectComponent)(Updater,"updater")