"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(exports,{started:()=>e,initialize:()=>f,shutdown:()=>g});const a=require("../../../common/logger"),b=function(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var d=c(b);if(d&&d.has(a))return d.get(a);var e={},f=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&Object.prototype.hasOwnProperty.call(a,g)){var h=f?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(e,g,h):e[g]=a[g]}return e.default=a,d&&d.set(a,e),e}(require("./registry"));function c(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,d=new WeakMap;return(c=function(a){return a?d:b})(a)}const d=(0,a.createLogger)("Patches"),e={};async function f(){let a=Object.entries(b);for(let c=0;c<a.length;c++){let[f,g]=a[c];if(!e[f])try{await g.initialize(),e[f]=!0}catch(h){d.error(`Failed to initialize ${f}.`,h.message)}}}async function g(){let a=Object.entries(b);for(let c=0;c<a.length;c++){let[f,g]=a[c];if(e[f])try{await g.shutdown(),delete e[f]}catch(h){d.error(`Failed to initialize ${f}.`,h.message)}}}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jbGllbnQvY29yZS9wYXRjaGVzL2luZGV4LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUxvZ2dlciB9IGZyb20gJ0Bjb21tb24vbG9nZ2VyJztcclxuaW1wb3J0ICogYXMgUGF0Y2hlcyBmcm9tICcuL3JlZ2lzdHJ5JztcclxuXHJcbmNvbnN0IExvZ2dlciA9IGNyZWF0ZUxvZ2dlcignUGF0Y2hlcycpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHN0YXJ0ZWQ6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+ID0ge307XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcclxuICBjb25zdCBwYXRjaGVzID0gT2JqZWN0LmVudHJpZXMoUGF0Y2hlcyk7XHJcblxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcGF0Y2hlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc3QgW25hbWUsIHBhdGNoXSA9IHBhdGNoZXNbaV07XHJcbiAgICBpZiAoc3RhcnRlZFtuYW1lXSkgY29udGludWU7XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgcGF0Y2guaW5pdGlhbGl6ZSgpO1xyXG4gICAgICBzdGFydGVkW25hbWVdID0gdHJ1ZTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgTG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gaW5pdGlhbGl6ZSAke25hbWV9LmAsIGUubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2h1dGRvd24oKSB7XHJcbiAgY29uc3QgcGF0Y2hlcyA9IE9iamVjdC5lbnRyaWVzKFBhdGNoZXMpO1xyXG5cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGNoZXMubGVuZ3RoOyBpKyspIHtcclxuICAgIGNvbnN0IFtuYW1lLCBwYXRjaF0gPSBwYXRjaGVzW2ldO1xyXG4gICAgaWYgKCFzdGFydGVkW25hbWVdKSBjb250aW51ZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICBhd2FpdCBwYXRjaC5zaHV0ZG93bigpO1xyXG4gICAgICBkZWxldGUgc3RhcnRlZFtuYW1lXTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgTG9nZ2VyLmVycm9yKGBGYWlsZWQgdG8gaW5pdGlhbGl6ZSAke25hbWV9LmAsIGUubWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59Il0sIm5hbWVzIjpbInN0YXJ0ZWQiLCJpbml0aWFsaXplIiwic2h1dGRvd24iLCJMb2dnZXIiLCJjcmVhdGVMb2dnZXIiLCJwYXRjaGVzIiwiT2JqZWN0IiwiZW50cmllcyIsIlBhdGNoZXMiLCJpIiwibGVuZ3RoIiwibmFtZSIsInBhdGNoIiwiZSIsImVycm9yIiwibWVzc2FnZSJdLCJtYXBwaW5ncyI6IkFBQUEsZ0tBS2FBLE9BQU8sS0FBUEEsQ0FBTyxDQUVFQyxVQUFVLEtBQVZBLENBQVUsQ0FnQlZDLFFBQVEsS0FBUkEsQ0FBUSxtQkF2QkQsd0JBQWdCLHljQUNwQixZQUFZLGtJQUVyQyxNQUFNQyxDQUFNLENBQUdDLEdBQUFBLENBQVksYUFBQSxFQUFDLFNBQVMsQ0FBQyxDQUV6QkosQ0FBTyxDQUE0QixFQUFFLEFBRlgsQUFJaEMsZ0JBQWVDLENBQVUsRUFBRyxDQUNqQyxJQUFNSSxDQUFPLENBQUdDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDQyxDQUFPLENBQUMsQUFBQyxBQUV4QyxLQUFLLElBQUlDLENBQUMsQ0FBRyxDQUFDLENBQUVBLENBQUMsQ0FBR0osQ0FBTyxDQUFDSyxNQUFNLENBQUVELENBQUMsRUFBRSxDQUFFLENBQ3ZDLEdBQU0sQ0FBQ0UsQ0FBSSxDQUFFQyxDQUFLLENBQUMsQ0FBR1AsQ0FBTyxDQUFDSSxDQUFDLENBQUMsQUFBQyxBQUNqQyxLQUFJVCxDQUFPLENBQUNXLENBQUksQ0FBQyxDQUVqQixHQUFJLENBQ0YsTUFBTUMsQ0FBSyxDQUFDWCxVQUFVLEVBQUUsQ0FDeEJELENBQU8sQ0FBQ1csQ0FBSSxDQUFDLENBQUcsQ0FBQSxDQUFJLENBQ3JCLEFBQUMsTUFBT0UsQ0FBQyxDQUFFLENBQ1ZWLENBQU0sQ0FBQ1csS0FBSyxDQUFDLENBQUMscUJBQXFCLEVBQUVILENBQUksQ0FBQyxDQUFDLENBQUMsQ0FBRUUsQ0FBQyxDQUFDRSxPQUFPLENBQUMsQ0FDekQsQUFQMkIsQ0FRN0IsQ0FDRixBQUVNLGVBQWViLENBQVEsRUFBRyxDQUMvQixJQUFNRyxDQUFPLENBQUdDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDQyxDQUFPLENBQUMsQUFBQyxBQUV4QyxLQUFLLElBQUlDLENBQUMsQ0FBRyxDQUFDLENBQUVBLENBQUMsQ0FBR0osQ0FBTyxDQUFDSyxNQUFNLENBQUVELENBQUMsRUFBRSxDQUFFLENBQ3ZDLEdBQU0sQ0FBQ0UsQ0FBSSxDQUFFQyxDQUFLLENBQUMsQ0FBR1AsQ0FBTyxDQUFDSSxDQUFDLENBQUMsQUFBQyxBQUNqQyxJQUFLVCxDQUFPLENBQUNXLENBQUksQ0FBQyxDQUVsQixHQUFJLENBQ0YsTUFBTUMsQ0FBSyxDQUFDVixRQUFRLEVBQUUsQ0FDdEIsT0FBT0YsQ0FBTyxDQUFDVyxDQUFJLENBQUMsQ0FDckIsQUFBQyxNQUFPRSxDQUFDLENBQUUsQ0FDVlYsQ0FBTSxDQUFDVyxLQUFLLENBQUMsQ0FBQyxxQkFBcUIsRUFBRUgsQ0FBSSxDQUFDLENBQUMsQ0FBQyxDQUFFRSxDQUFDLENBQUNFLE9BQU8sQ0FBQyxDQUN6RCxBQVA0QixDQVE5QixDQUNGIn0=