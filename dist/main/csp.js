"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"remove",{enumerable:!0,get:()=>remove});const e=require("../common/constants"),t=require("electron");function remove(){t.app.on("browser-window-created",(t,n)=>{let{session:o}=n.webContents;o.webRequest.onHeadersReceived((t,n)=>{let{responseHeaders:o}=t,s=Object.keys(o);for(let a=0;a<e.Headers.delete.length;a++){let i=e.Headers.delete[a];if(!i)continue;let r=s.find(e=>e.toLowerCase()===i.toLowerCase());r&&delete o[r]}for(let d=0;d<e.Headers.append.length;d++){let l=e.Headers.append[d];if(!l)continue;if(l.exists?.name){let f=s.find(e=>e.toLowerCase()===l.exists.name);if(l.exists.condition!==Boolean(f))continue}let p=s.find(e=>e.toLowerCase()===l.name.toLowerCase());p&&(o[p]=[l.value])}n({responseHeaders:o})})})}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tYWluL2NzcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIZWFkZXJzIH0gZnJvbSAnQGNvbnN0YW50cyc7XHJcbmltcG9ydCB7IGFwcCB9IGZyb20gJ2VsZWN0cm9uJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUoKSB7XHJcbiAgIGFwcC5vbignYnJvd3Nlci13aW5kb3ctY3JlYXRlZCcsIChlLCB3aW5kb3cpID0+IHtcclxuICAgICAgY29uc3QgeyBzZXNzaW9uIH0gPSB3aW5kb3cud2ViQ29udGVudHM7XHJcblxyXG4gICAgICBzZXNzaW9uLndlYlJlcXVlc3Qub25IZWFkZXJzUmVjZWl2ZWQoKG9wdHMsIGNhbGxiYWNrKSA9PiB7XHJcbiAgICAgICAgIGNvbnN0IHsgcmVzcG9uc2VIZWFkZXJzIH0gPSBvcHRzO1xyXG4gICAgICAgICBjb25zdCBvcmlnID0gT2JqZWN0LmtleXMocmVzcG9uc2VIZWFkZXJzKTtcclxuXHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgSGVhZGVycy5kZWxldGUubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgaGVhZGVyID0gSGVhZGVycy5kZWxldGVbaV07XHJcbiAgICAgICAgICAgIGlmICghaGVhZGVyKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBvcmlnLmZpbmQobyA9PiBvLnRvTG93ZXJDYXNlKCkgPT09IGhlYWRlci50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICAgICAgaWYgKCFuYW1lKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgICAgIGRlbGV0ZSByZXNwb25zZUhlYWRlcnNbbmFtZV07XHJcbiAgICAgICAgIH1cclxuXHJcbiAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgSGVhZGVycy5hcHBlbmQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IEhlYWRlcnMuYXBwZW5kW2ldO1xyXG4gICAgICAgICAgICBpZiAoIWRhdGEpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEuZXhpc3RzPy5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgIGNvbnN0IHJlcyA9IG9yaWcuZmluZChyID0+IHIudG9Mb3dlckNhc2UoKSA9PT0gZGF0YS5leGlzdHMubmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICBpZiAoZGF0YS5leGlzdHMuY29uZGl0aW9uICE9PSBCb29sZWFuKHJlcykpIHtcclxuICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IG9yaWcuZmluZChvID0+IG8udG9Mb3dlckNhc2UoKSA9PT0gZGF0YS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICBpZiAoIW5hbWUpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICAgICAgcmVzcG9uc2VIZWFkZXJzW25hbWVdID0gW2RhdGEudmFsdWVdO1xyXG4gICAgICAgICB9XHJcblxyXG4gICAgICAgICBjYWxsYmFjayh7IHJlc3BvbnNlSGVhZGVycyB9KTtcclxuICAgICAgfSk7XHJcbiAgIH0pO1xyXG59OyJdLCJuYW1lcyI6WyJyZW1vdmUiLCJhcHAiLCJvbiIsImUiLCJ3aW5kb3ciLCJzZXNzaW9uIiwid2ViQ29udGVudHMiLCJ3ZWJSZXF1ZXN0Iiwib25IZWFkZXJzUmVjZWl2ZWQiLCJvcHRzIiwiY2FsbGJhY2siLCJyZXNwb25zZUhlYWRlcnMiLCJvcmlnIiwiT2JqZWN0Iiwia2V5cyIsImkiLCJIZWFkZXJzIiwiZGVsZXRlIiwibGVuZ3RoIiwiaGVhZGVyIiwibmFtZSIsImZpbmQiLCJvIiwidG9Mb3dlckNhc2UiLCJhcHBlbmQiLCJkYXRhIiwiZXhpc3RzIiwicmVzIiwiciIsImNvbmRpdGlvbiIsIkJvb2xlYW4iLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6IkFBQUEsa0dBR2dCQSxRQUFNLHdCQUFOQSxNQUFNLG1CQUhFLHFCQUFZLFlBQ2hCLFVBQVUsQ0FFdkIsVUFBU0EsTUFBTSxFQUFHLENBQ3RCQyxDQUFHLElBQUEsQ0FBQ0MsRUFBRSxDQUFDLHdCQUF3QixDQUFFLENBQUNDLENBQUMsQ0FBRUMsQ0FBTSxHQUFLLENBQzdDLEdBQU0sQ0FBRUMsT0FBTyxDQUFQQSxDQUFPLENBQUUsQ0FBR0QsQUFEY0EsQ0FBTSxDQUNiRSxXQUFXLEFBQUMsQUFFdkNELENBQUFBLENBQU8sQ0FBQ0UsVUFBVSxDQUFDQyxpQkFBaUIsQ0FBQyxDQUFDQyxDQUFJLENBQUVDLENBQVEsR0FBSyxDQUN0RCxHQUFNLENBQUVDLGVBQWUsQ0FBZkEsQ0FBZSxDQUFFLENBQUdGLENBQUksQ0FDMUJHLENBQUksQ0FBR0MsTUFBTSxDQUFDQyxJQUFJLENBQUNILENBQWUsQ0FBQyxBQURSLEFBR2pDLEtBQUssSUFBSUksQ0FBQyxDQUFHLENBQUMsQ0FBRUEsQ0FBQyxDQUFHQyxDQUFPLFFBQUEsQ0FBQ0MsTUFBTSxDQUFDQyxNQUFNLENBQUVILENBQUMsRUFBRSxDQUFFLENBQzdDLElBQU1JLENBQU0sQ0FBR0gsQ0FBTyxRQUFBLENBQUNDLE1BQU0sQ0FBQ0YsQ0FBQyxDQUFDLEFBQUMsQUFDakMsSUFBSSxDQUFDSSxDQUFNLENBQUUsUUFBUyxBQUV0QixLQUFNQyxDQUFJLENBQUdSLENBQUksQ0FBQ1MsSUFBSSxDQUFDQyxDQUFDLEVBQUlBLENBQUMsQ0FBQ0MsV0FBVyxFQUFFLEdBQUtKLENBQU0sQ0FBQ0ksV0FBVyxFQUFFLENBQUMsQUFBQyxDQUNqRUgsQ0FBSSxFQUVULE9BQU9ULENBQWUsQ0FBQ1MsQ0FBSSxDQUFDLENBQzlCLEFBRUQsSUFBSyxJQUFJTCxDQUFDLENBQUcsQ0FBQyxDQUFFQSxDQUFDLENBQUdDLENBQU8sUUFBQSxDQUFDUSxNQUFNLENBQUNOLE1BQU0sQ0FBRUgsQ0FBQyxFQUFFLENBQUUsQ0FDN0MsSUFBTVUsQ0FBSSxDQUFHVCxDQUFPLFFBQUEsQ0FBQ1EsTUFBTSxDQUFDVCxDQUFDLENBQUMsQUFBQyxBQUMvQixJQUFJLENBQUNVLENBQUksQ0FBRSxRQUFTLEFBRXBCLElBQUlBLENBQUksQ0FBQ0MsTUFBTSxFQUFFTixJQUFJLENBQUUsQ0FDcEIsSUFBTU8sQ0FBRyxDQUFHZixDQUFJLENBQUNTLElBQUksQ0FBQ08sQ0FBQyxFQUFJQSxDQUFDLENBQUNMLFdBQVcsRUFBRSxHQUFLRSxDQUFJLENBQUNDLE1BQU0sQ0FBQ04sSUFBSSxDQUFDLEFBQUMsQUFFakUsSUFBSUssQ0FBSSxDQUFDQyxNQUFNLENBQUNHLFNBQVMsR0FBS0MsT0FBTyxDQUFDSCxDQUFHLENBQUMsQ0FDdkMsUUFBUyxBQUNYLENBQ0gsQUFFRCxJQUFNUCxDQUFJLENBQUdSLENBQUksQ0FBQ1MsSUFBSSxDQUFDQyxDQUFDLEVBQUlBLENBQUMsQ0FBQ0MsV0FBVyxFQUFFLEdBQUtFLENBQUksQ0FBQ0wsSUFBSSxDQUFDRyxXQUFXLEVBQUUsQ0FBQyxBQUFDLENBQ3BFSCxDQUFJLEVBRVRULENBQUFBLENBQWUsQ0FBQ1MsQ0FBSSxDQUFDLENBQUcsQ0FBQ0ssQ0FBSSxDQUFDTSxLQUFLLENBQUMsQ0FBQSxDQUN0QyxBQUVEckIsQ0FBUSxDQUFDLENBQUVDLGVBQWUsQ0FBZkEsQ0FBZSxDQUFFLENBQUMsQ0FDL0IsQ0FBQyxDQUNKLENBQUMsQ0FDSixBQUFDIn0=