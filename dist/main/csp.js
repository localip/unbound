"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"remove",{enumerable:!0,get:()=>c});const a=require("../common/constants"),b=require("electron");function c(){b.app.on("browser-window-created",(b,c)=>{let{session:d}=c.webContents;d.webRequest.onHeadersReceived((b,c)=>{let{responseHeaders:d}=b,e=Object.keys(d);for(let f=0;f<a.Headers.delete.length;f++){let g=a.Headers.delete[f];if(!g)continue;let h=e.find(a=>a.toLowerCase()===g.toLowerCase());h&&delete d[h]}for(let i=0;i<a.Headers.append.length;i++){let j=a.Headers.append[i];if(!j)continue;if(j.exists?.name){let k=e.find(a=>a.toLowerCase()===j.exists.name);if(j.exists.condition!==Boolean(k))continue}let l=e.find(a=>a.toLowerCase()===j.name.toLowerCase());l&&(d[l]=[j.value])}c({responseHeaders:d})})})}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9tYWluL2NzcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBIZWFkZXJzIH0gZnJvbSAnQGNvbnN0YW50cyc7XHJcbmltcG9ydCB7IGFwcCB9IGZyb20gJ2VsZWN0cm9uJztcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiByZW1vdmUoKSB7XHJcbiAgYXBwLm9uKCdicm93c2VyLXdpbmRvdy1jcmVhdGVkJywgKGUsIHdpbmRvdykgPT4ge1xyXG4gICAgY29uc3QgeyBzZXNzaW9uIH0gPSB3aW5kb3cud2ViQ29udGVudHM7XHJcblxyXG4gICAgc2Vzc2lvbi53ZWJSZXF1ZXN0Lm9uSGVhZGVyc1JlY2VpdmVkKChvcHRzLCBjYWxsYmFjaykgPT4ge1xyXG4gICAgICBjb25zdCB7IHJlc3BvbnNlSGVhZGVycyB9ID0gb3B0cztcclxuICAgICAgY29uc3Qgb3JpZyA9IE9iamVjdC5rZXlzKHJlc3BvbnNlSGVhZGVycyk7XHJcblxyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IEhlYWRlcnMuZGVsZXRlLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gSGVhZGVycy5kZWxldGVbaV07XHJcbiAgICAgICAgaWYgKCFoZWFkZXIpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBjb25zdCBuYW1lID0gb3JpZy5maW5kKG8gPT4gby50b0xvd2VyQ2FzZSgpID09PSBoZWFkZXIudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgaWYgKCFuYW1lKSBjb250aW51ZTtcclxuXHJcbiAgICAgICAgZGVsZXRlIHJlc3BvbnNlSGVhZGVyc1tuYW1lXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBIZWFkZXJzLmFwcGVuZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBIZWFkZXJzLmFwcGVuZFtpXTtcclxuICAgICAgICBpZiAoIWRhdGEpIGNvbnRpbnVlO1xyXG5cclxuICAgICAgICBpZiAoZGF0YS5leGlzdHM/Lm5hbWUpIHtcclxuICAgICAgICAgIGNvbnN0IHJlcyA9IG9yaWcuZmluZChyID0+IHIudG9Mb3dlckNhc2UoKSA9PT0gZGF0YS5leGlzdHMubmFtZSk7XHJcblxyXG4gICAgICAgICAgaWYgKGRhdGEuZXhpc3RzLmNvbmRpdGlvbiAhPT0gQm9vbGVhbihyZXMpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbmFtZSA9IG9yaWcuZmluZChvID0+IG8udG9Mb3dlckNhc2UoKSA9PT0gZGF0YS5uYW1lLnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgIGlmICghbmFtZSkgY29udGludWU7XHJcblxyXG4gICAgICAgIHJlc3BvbnNlSGVhZGVyc1tuYW1lXSA9IFtkYXRhLnZhbHVlXTtcclxuICAgICAgfVxyXG5cclxuICAgICAgY2FsbGJhY2soeyByZXNwb25zZUhlYWRlcnMgfSk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufTsiXSwibmFtZXMiOlsicmVtb3ZlIiwiYXBwIiwib24iLCJlIiwid2luZG93Iiwic2Vzc2lvbiIsIndlYkNvbnRlbnRzIiwid2ViUmVxdWVzdCIsIm9uSGVhZGVyc1JlY2VpdmVkIiwib3B0cyIsImNhbGxiYWNrIiwicmVzcG9uc2VIZWFkZXJzIiwib3JpZyIsIk9iamVjdCIsImtleXMiLCJpIiwiSGVhZGVycyIsImRlbGV0ZSIsImxlbmd0aCIsImhlYWRlciIsIm5hbWUiLCJmaW5kIiwibyIsInRvTG93ZXJDYXNlIiwiYXBwZW5kIiwiZGF0YSIsImV4aXN0cyIsInJlcyIsInIiLCJjb25kaXRpb24iLCJCb29sZWFuIiwidmFsdWUiXSwibWFwcGluZ3MiOiJBQUFBLGtHQUdnQkEsUUFBTSx3QkFBTkEsQ0FBTSxtQkFIRSxxQkFBWSxZQUNoQixVQUFVLENBRXZCLFVBQVNBLENBQU0sRUFBRyxDQUN2QkMsQ0FBRyxJQUFBLENBQUNDLEVBQUUsQ0FBQyx3QkFBd0IsQ0FBRSxDQUFDQyxDQUFDLENBQUVDLENBQU0sR0FBSyxDQUM5QyxHQUFNLENBQUVDLE9BQU8sQ0FBUEEsQ0FBTyxDQUFFLENBQUdELEFBRGVBLENBQU0sQ0FDZEUsV0FBVyxBQUFDLEFBRXZDRCxDQUFBQSxDQUFPLENBQUNFLFVBQVUsQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQ0MsQ0FBSSxDQUFFQyxDQUFRLEdBQUssQ0FDdkQsR0FBTSxDQUFFQyxlQUFlLENBQWZBLENBQWUsQ0FBRSxDQUFHRixDQUFJLENBQzFCRyxDQUFJLENBQUdDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDSCxDQUFlLENBQUMsQUFEUixBQUdqQyxLQUFLLElBQUlJLENBQUMsQ0FBRyxDQUFDLENBQUVBLENBQUMsQ0FBR0MsQ0FBTyxRQUFBLENBQUNDLE1BQU0sQ0FBQ0MsTUFBTSxDQUFFSCxDQUFDLEVBQUUsQ0FBRSxDQUM5QyxJQUFNSSxDQUFNLENBQUdILENBQU8sUUFBQSxDQUFDQyxNQUFNLENBQUNGLENBQUMsQ0FBQyxBQUFDLEFBQ2pDLElBQUksQ0FBQ0ksQ0FBTSxDQUFFLFFBQVMsQUFFdEIsS0FBTUMsQ0FBSSxDQUFHUixDQUFJLENBQUNTLElBQUksQ0FBQ0MsQ0FBQyxFQUFJQSxDQUFDLENBQUNDLFdBQVcsRUFBRSxHQUFLSixDQUFNLENBQUNJLFdBQVcsRUFBRSxDQUFDLEFBQUMsQ0FDakVILENBQUksRUFFVCxPQUFPVCxDQUFlLENBQUNTLENBQUksQ0FBQyxDQUM3QixBQUVELElBQUssSUFBSUwsQ0FBQyxDQUFHLENBQUMsQ0FBRUEsQ0FBQyxDQUFHQyxDQUFPLFFBQUEsQ0FBQ1EsTUFBTSxDQUFDTixNQUFNLENBQUVILENBQUMsRUFBRSxDQUFFLENBQzlDLElBQU1VLENBQUksQ0FBR1QsQ0FBTyxRQUFBLENBQUNRLE1BQU0sQ0FBQ1QsQ0FBQyxDQUFDLEFBQUMsQUFDL0IsSUFBSSxDQUFDVSxDQUFJLENBQUUsUUFBUyxBQUVwQixJQUFJQSxDQUFJLENBQUNDLE1BQU0sRUFBRU4sSUFBSSxDQUFFLENBQ3JCLElBQU1PLENBQUcsQ0FBR2YsQ0FBSSxDQUFDUyxJQUFJLENBQUNPLENBQUMsRUFBSUEsQ0FBQyxDQUFDTCxXQUFXLEVBQUUsR0FBS0UsQ0FBSSxDQUFDQyxNQUFNLENBQUNOLElBQUksQ0FBQyxBQUFDLEFBRWpFLElBQUlLLENBQUksQ0FBQ0MsTUFBTSxDQUFDRyxTQUFTLEdBQUtDLE9BQU8sQ0FBQ0gsQ0FBRyxDQUFDLENBQ3hDLFFBQVMsQUFDVixDQUNGLEFBRUQsSUFBTVAsQ0FBSSxDQUFHUixDQUFJLENBQUNTLElBQUksQ0FBQ0MsQ0FBQyxFQUFJQSxDQUFDLENBQUNDLFdBQVcsRUFBRSxHQUFLRSxDQUFJLENBQUNMLElBQUksQ0FBQ0csV0FBVyxFQUFFLENBQUMsQUFBQyxDQUNwRUgsQ0FBSSxFQUVUVCxDQUFBQSxDQUFlLENBQUNTLENBQUksQ0FBQyxDQUFHLENBQUNLLENBQUksQ0FBQ00sS0FBSyxDQUFDLENBQUEsQ0FDckMsQUFFRHJCLENBQVEsQ0FBQyxDQUFFQyxlQUFlLENBQWZBLENBQWUsQ0FBRSxDQUFDLENBQzlCLENBQUMsQ0FDSCxDQUFDLENBQ0gsQUFBQyJ9